<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-title>Buscar o Reportar Auto</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-segment [(ngModel)]="segment">
    <ion-segment-button value="buscar">
      <ion-label>Buscar Auto</ion-label> 
    </ion-segment-button>
    <ion-segment-button value="reportar">
      <ion-label>Reportar Auto Robado</ion-label>
    </ion-segment-button>
  </ion-segment>

  <div *ngIf="segment === 'buscar'">
    <form (ngSubmit)="buscarAuto()" #buscarForm="ngForm">
      <ion-item>
        <ion-label position="floating">Número de Patente</ion-label>
        <ion-input type="text" [(ngModel)]="patente" name="patente" required></ion-input>
      </ion-item>

      <ion-button expand="block" type="submit" [disabled]="!buscarForm.form.valid">Buscar</ion-button>
    </form>

    <div *ngIf="autoReportado">
      <ion-item>
        <ion-label position="floating">Dirección donde se encuentra</ion-label>
        <ion-input type="text" [(ngModel)]="direccion" name="direccion" required></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Foto (opcional)</ion-label>
        <ion-input type="file" accept="image/*" (change)="onFileSelected($event)" name="foto"></ion-input>
      </ion-item>

      <ion-button expand="block" (click)="enviarReporte()">Enviar Reporte</ion-button>
    </div>
  </div>

  <div *ngIf="segment === 'reportar'">
    <form (ngSubmit)="reportarAuto()" #reportarForm="ngForm">
      <ion-item>
        <ion-label position="floating">Número de Patente</ion-label>
        <ion-input type="text" [(ngModel)]="patente" name="patente" required></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Descripción</ion-label>
        <ion-input type="text" [(ngModel)]="descripcion" name="descripcion" required></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Foto</ion-label>
        <ion-input type="file" accept="image/*" (change)="onFileSelected($event)" name="foto"></ion-input>
      </ion-item>

      <ion-button expand="block" type="submit" [disabled]="!reportarForm.form.valid">Reportar</ion-button>
    </form>
  </div>
</ion-content>
